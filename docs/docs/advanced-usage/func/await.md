---  
title: AwaitResult  
description: Ожидание результата асинхронной операции для синхронного продолжения выполнения.  
---

# AwaitResult

`AwaitResult` — это метод, который позволяет ожидать завершения асинхронной операции и получить результат для последующей синхронной обработки.
Если операция завершилась успешно, возвращается результат.
Если произошла ошибка или задача была отменена, возвращается ошибка с соответствующим сообщением.

## Когда использовать  

- Если вы хотите продолжить цепочку обработки с использованием синхронных операций.
- Если требуется обработка результата без использования `await`.  
- Для упрощения кода в ситуациях, когда асинхронное ожидание нецелесообразно или неудобно.  

## Как это работает  

- `AwaitResult` выполняет ожидание задачи с использованием `GetAwaiter().GetResult()`, что позволяет избежать асинхронности и получить результат синхронно.
- В случае успешного выполнения возвращается результат операции.
- При отмене задачи возвращается ошибка с сообщением о том, что операция была отменена.
- Если возникает исключение, возвращается ошибка с текстом исключения.

> [!WARNING]
> В большинстве случаев лучше использовать оперотор `await`, что бы избежать блокирования асинхронного контекста.

---

## Пример использования  

### Ожидание результата без значения

```csharp
Task<Result> operation = SomeAsyncOperation();

// Ожидание результата и получение результата синхронно
Result result = operation.AwaitResult();

if (result.IsSuccess)
{
    Console.WriteLine("Операция завершена успешно.");
}
else
{
    Console.WriteLine($"Ошибка: {result.SummaryErrorMessages()}");
}
```

### Ожидание результата с возвращаемым значением

```csharp
Task<Result<int>> operation = SomeAsyncOperationWithResult();

// Ожидание результата и получение значения синхронно
Result<int> result = operation.AwaitResult();

if (result.IsSuccess)
{
    Console.WriteLine($"Полученное значение: {result.Value}");
}
else
{
    Console.WriteLine($"Ошибка: {result.SummaryErrorMessages()}");
}
```

---

## Асинхронная поддержка  

Хотя `AwaitResult` используется для синхронного получения результата, его можно применять в асинхронных методах, если нужно временно выйти из асинхронного контекста:  

```csharp
async Task ProcessResultAsync()
{
    var result = SomeAsyncOperation().AwaitResult();

    if (result.IsSuccess)
    {
        Console.WriteLine("Операция завершена успешно.");
    }
    else
    {
        Console.WriteLine($"Ошибка: {result.SummaryErrorMessages()}");
    }
}
```
